<html><head>
    <title>HTML TEST</title>
  <style>body{ font-family: Seravek, "Gill Sans Nova", Ubuntu, Calibri, "DejaVu Sans", source-sans-pro, sans-serif; margin: 1rem; padding: 0; background: white; } hr{ flex: 0 0 1px; align-self: stretch; } .panel{ position: relative; padding: 0.5rem; background-color: rgba(0, 0, 0, 0.125); } .container{ position: relative; display: flex; gap: 0.5rem; } .container.rows{ flex-direction: column; } .container.columns{ flex-direction: row; } header #title{ flex: 1 1 0; } header #nav{ flex: 1 1 15rem; display: flex; flex-wrap: wrap; flex-direction: row; gap: 0.5rem; justify-content: center; } header #nav > a{ display: block; align-self: center; } .title > .number{ font-size: 1.125rem; padding-right: 0.5rem; } .likert table{ background-color: white; table-layout: fixed; border-collapse: collapse; } .likert col.response{ width: 10rem; } .likert col.count{ width: 4rem; border: 1px #999; border-style: none solid none solid; } .likert col.perc{ width: 5rem; } .likert tr:nth-child(even){ background-color: #ddd; } .likert th, .likert td{ padding: 0.25rem; } .likert td:nth-child(2), .likert td:nth-child(3){ text-align: center; } .chart{ display: flex; flex: 1 1 15rem; background: white; } .chart .background{ position: absolute; inset: 0; border: 1px black; border-style: solid none solid solid; background-size: 25% 100%; background-image: linear-gradient(to left, black 1px, transparent 1px); } .chart .data{ position: absolute; inset: 0.5rem 1px; gap: 0.25rem; } .chart .bar{ position: relative; flex: 1; padding: 0; box-sizing: border-box; } .chart .bar > .label{ position: absolute; left: 0.25rem; bottom: 0.25rem; width: calc(100% - 0.5rem); white-space: nowrap; text-align: right; line-height: 100%; } .chart .bar.agree_strongly{ background-color: rgba(112, 218, 108, 0.85); } .chart .bar.agree{ background-color: rgba(156, 223, 154, 0.85); } .chart .bar.disagree{ background-color: rgba(221, 151, 151, 0.85); } .chart .bar.disagree_strongly{ background-color: rgba(182, 87, 87, 0.85); } .chart .bar.na{ background-color: rgba(141, 141, 141, 0.85); } .comments > .list{ position: relative; display: flex; flex-direction: column; gap: 1rem; padding-top: 0.5rem; justify-content: center; align-items: center; } .comments > .list .panel{ transition: background-color 0.25s ease-out; } .comments > .list .panel:hover{ background-color: rgba(255, 255, 255, 0.5); } .comments > .list .panel > .number{ padding-right: 0.25rem; }</style></head>
  <body>
    <script>var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var all_likerts = JSON.parse("$ALL_LIKERT");
var all_comments = JSON.parse("$ALL_COMMENTS");
var likert_keys = ['agree_strongly', 'agree', 'disagree', 'disagree_strongly', 'na'];
function insert_likert(question) {
    var total_questions = question.agree_strongly + question.agree + question.disagree + question.disagree_strongly + (question.na || 0);
    var id = "question".concat(question.num);
    var template = document.querySelector('#template_likert');
    var bucket = template.content.cloneNode(true);
    var chart = bucket.querySelector('.chart');
    bucket.children[0].id = id;
    bucket.querySelector('.title > .number').innerHTML = "".concat(question.num);
    bucket.querySelector('.title > .text').innerHTML = "".concat(question.text);
    function remove_na(row) {
        row.style.display = 'none';
        chart.querySelector('.bar.na').style.display = 'none';
    }
    for (var _i = 0, likert_keys_1 = likert_keys; _i < likert_keys_1.length; _i++) {
        var key = likert_keys_1[_i];
        var value = question[key];
        var row = bucket.querySelector(".".concat(key));
        if (key == 'na' && value == 0) {
            remove_na(row);
            continue;
        }
        if (value == undefined)
            continue;
        if (value) {
            var percent = (value / total_questions * 100);
            row.children[1].innerHTML = "".concat(value);
            row.children[2].innerHTML = "".concat(percent.toFixed(2), "%");
            chart.querySelector(".bar.".concat(key)).style.width = "".concat(percent, "%");
        }
        else {
            row.children[1].innerHTML = '0';
            row.children[2].innerHTML = '0%';
            // (chart.querySelector(`.bar.${key}`) as HTMLElement).style.width = `0%`;
            chart.querySelector(".bar.".concat(key)).style.display = 'none';
        }
    }
    // add template, rule, chapter link
    document.body.appendChild(bucket);
    document.body.appendChild(document.createElement('hr'));
    document.querySelector('#nav').appendChild((function () {
        var el = document.createElement('a');
        el.href = "#".concat(id);
        el.innerHTML = "Question ".concat(question.num);
        return el;
    })());
}
function insert_comments(question) {
    var id = "question".concat(question.num);
    var template = document.querySelector('#template_comments');
    var bucket = template.content.cloneNode(true);
    var list = bucket.querySelector('.list');
    // const list2 = bucket.querySelector('.list2');
    bucket.children[0].id = id;
    bucket.querySelector('.title > .number').innerHTML = "".concat(question.num);
    bucket.querySelector('.title > .text').innerHTML = "".concat(question.text);
    var _loop_1 = function (i) {
        var comment = question.comments[i];
        list.appendChild((function () {
            var item = document.createElement('div');
            item.classList.add('panel');
            item.appendChild((function () {
                var item = document.createElement('span');
                item.classList.add('number');
                item.innerHTML = "".concat(i + 1, ")");
                return item;
            })());
            item.appendChild((function () {
                var item = document.createElement('span');
                item.classList.add('comment');
                item.innerHTML = comment;
                return item;
            })());
            return item;
        })());
    };
    for (var i = 0; i < question.comments.length; ++i) {
        _loop_1(i);
    }
    document.body.appendChild(bucket);
    document.body.appendChild(document.createElement('hr'));
    document.querySelector('#nav').appendChild((function () {
        var el = document.createElement('a');
        el.href = "#".concat(id);
        el.innerHTML = "Comments (".concat(question.num, ")");
        return el;
    })());
}
(function () { return __awaiter(void 0, void 0, void 0, function () {
    var _i, all_likerts_1, q, _a, all_comments_1, c;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0: return [4 /*yield*/, new Promise(function (res) { return requestAnimationFrame(res); })];
            case 1:
                _b.sent();
                for (_i = 0, all_likerts_1 = all_likerts; _i < all_likerts_1.length; _i++) {
                    q = all_likerts_1[_i];
                    insert_likert(q);
                }
                for (_a = 0, all_comments_1 = all_comments; _a < all_comments_1.length; _a++) {
                    c = all_comments_1[_a];
                    insert_comments(c);
                }
                return [2 /*return*/];
        }
    });
}); })();
</script><header class="container columns">
      <div id="title">
        <h1>$COURSE</h1>
        <h3>$COHORT</h3>
        <h3>$DELIVERED</h3>
      </div>
      <div id="nav"> </div>
    </header>
    <hr>
    <template id="template_comments">
      <div class="panel container rows comments">
        <div class="panel title"><span class="number">3: </span><span class="text">This is the comments prompt. Do you have any comments?</span></div>
        <div class="container rows list"></div>
      </div>
    </template>
    <template id="template_likert">
      <div class="panel container rows likert">
        <div class="panel title"> <span class="number"> </span><span class="text">This is the question. What is your response?</span></div>
        <div class="container columns">
          <table>
            <colgroup>
              <col class="response">
              <col class="count">
              <col class="perc">
            </colgroup>
            <tbody><tr class="headers">
              <th>Response</th>
              <th>Count</th>
              <th>%</th>
            </tr>
            <tr class="agree_strongly">
              <td>Strongly Agree</td>
              <td>0</td>
              <td>0%</td>
            </tr>
            <tr class="agree">
              <td>Agree</td>
              <td>0</td>
              <td>0%</td>
            </tr>
            <tr class="disagree">
              <td>Disagree</td>
              <td>0</td>
              <td>0%</td>
            </tr>
            <tr class="disagree_strongly">
              <td>Strongly Disagree</td>
              <td>0</td>
              <td>0%</td>
            </tr>
            <tr class="na">
              <td>N/A</td>
              <td>0</td>
              <td>0%</td>
            </tr>
          </tbody></table>
          <div class="container chart">
            <div class="background"></div>
            <div class="container rows data">
              <div class="bar agree_strongly"> <span class="label">Agree Strongly</span></div>
              <div class="bar agree"> <span class="label">Agree</span></div>
              <div class="bar disagree"> <span class="label">Disagree</span></div>
              <div class="bar disagree_strongly"> <span class="label">Disagree Strongly</span></div>
              <div class="bar na"> <span class="label">N/A</span></div>
            </div>
          </div>
        </div>
      </div>
    </template>
  
</body></html>